<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Encryption | HStreamDB Documentation</title><meta name="generator" content="VuePress 1.9.5"><link rel="shortcut icon" type="image/x-icon" href="/docs/docs-images/favicon-hstreamdb.ico"><link rel="stylesheet" href="https://at.alicdn.com/t/font_3137465_33anb3gl4nt.css"><script charset="utf-8" src="https://at.alicdn.com/t/font_3125249_pld7abubdat.js"></script><link rel="canonical" href="https://hstream.io/docs/en/latest/security/encryption.html"><meta name="docsearch:language" content="en"><meta name="docsearch:product" content="hstreamdb"><meta name="docsearch:version" content="latest"><meta name="description" content=""><meta property="og:site_name" content="HStreamDB Documentation"><meta property="og:title" content="Encryption"><meta property="og:type" content="website"><meta property="og:url" content="https://hstream.io/docs/en/latest/security/encryption.html"><meta name="twitter:title" content="Encryption"><meta name="twitter:url" content="https://hstream.io/docs/en/latest/security/encryption.html"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@EMQTech"><meta name="twitter:creator" content="@EMQTech"><meta name="twitter:image" content="https://www.emqx.com/images/logo_512.png"><meta name="twitter:image:alt" content="EMQ LOGO"><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta property="og:image" content="https://www.emqx.com/images/logo_512.png"><link rel="preload" href="/docs/docs-assets/css/0.styles.ec078ccc.css" as="style"><link rel="preload" href="/docs/docs-assets/js/app.39d178c6.js" as="script"><link rel="preload" href="/docs/docs-assets/js/2.a817f45a.js" as="script"><link rel="preload" href="/docs/docs-assets/js/57.146cbc29.js" as="script"><link rel="prefetch" href="/docs/docs-assets/js/10.332ffeae.js"><link rel="prefetch" href="/docs/docs-assets/js/100.76ffe154.js"><link rel="prefetch" href="/docs/docs-assets/js/101.496699f7.js"><link rel="prefetch" href="/docs/docs-assets/js/102.4067d29a.js"><link rel="prefetch" href="/docs/docs-assets/js/103.7c938118.js"><link rel="prefetch" href="/docs/docs-assets/js/11.5840f0c1.js"><link rel="prefetch" href="/docs/docs-assets/js/12.8ce3b87f.js"><link rel="prefetch" href="/docs/docs-assets/js/13.60cf43f0.js"><link rel="prefetch" href="/docs/docs-assets/js/14.c11536cb.js"><link rel="prefetch" href="/docs/docs-assets/js/15.68fdb2b2.js"><link rel="prefetch" href="/docs/docs-assets/js/16.e21697ca.js"><link rel="prefetch" href="/docs/docs-assets/js/17.cea5ddd3.js"><link rel="prefetch" href="/docs/docs-assets/js/18.3d53a549.js"><link rel="prefetch" href="/docs/docs-assets/js/19.902a62f7.js"><link rel="prefetch" href="/docs/docs-assets/js/20.5b0040ce.js"><link rel="prefetch" href="/docs/docs-assets/js/21.d7b55b31.js"><link rel="prefetch" href="/docs/docs-assets/js/22.a45d14f0.js"><link rel="prefetch" href="/docs/docs-assets/js/23.5d53005f.js"><link rel="prefetch" href="/docs/docs-assets/js/24.a46a8dfc.js"><link rel="prefetch" href="/docs/docs-assets/js/25.91e21659.js"><link rel="prefetch" href="/docs/docs-assets/js/26.b41e22a0.js"><link rel="prefetch" href="/docs/docs-assets/js/27.3363c682.js"><link rel="prefetch" href="/docs/docs-assets/js/28.a7d50ff0.js"><link rel="prefetch" href="/docs/docs-assets/js/29.bc81e9e9.js"><link rel="prefetch" href="/docs/docs-assets/js/3.e5ef1dad.js"><link rel="prefetch" href="/docs/docs-assets/js/30.e9d22244.js"><link rel="prefetch" href="/docs/docs-assets/js/31.90a500b6.js"><link rel="prefetch" href="/docs/docs-assets/js/32.d8edfb20.js"><link rel="prefetch" href="/docs/docs-assets/js/33.d7d535f0.js"><link rel="prefetch" href="/docs/docs-assets/js/34.b955ce64.js"><link rel="prefetch" href="/docs/docs-assets/js/35.2fb3aae6.js"><link rel="prefetch" href="/docs/docs-assets/js/36.da91a27a.js"><link rel="prefetch" href="/docs/docs-assets/js/37.bcbb6e6b.js"><link rel="prefetch" href="/docs/docs-assets/js/38.087bc317.js"><link rel="prefetch" href="/docs/docs-assets/js/39.e344a100.js"><link rel="prefetch" href="/docs/docs-assets/js/4.774ab83f.js"><link rel="prefetch" href="/docs/docs-assets/js/40.216d3e57.js"><link rel="prefetch" href="/docs/docs-assets/js/41.53dd0703.js"><link rel="prefetch" href="/docs/docs-assets/js/42.fd6fc994.js"><link rel="prefetch" href="/docs/docs-assets/js/43.718416c9.js"><link rel="prefetch" href="/docs/docs-assets/js/44.4e309aa0.js"><link rel="prefetch" href="/docs/docs-assets/js/45.93265926.js"><link rel="prefetch" href="/docs/docs-assets/js/46.6acff038.js"><link rel="prefetch" href="/docs/docs-assets/js/47.f46a49a2.js"><link rel="prefetch" href="/docs/docs-assets/js/48.bbe60ce9.js"><link rel="prefetch" href="/docs/docs-assets/js/49.2e17abae.js"><link rel="prefetch" href="/docs/docs-assets/js/5.80faf5b0.js"><link rel="prefetch" href="/docs/docs-assets/js/50.fc9a5436.js"><link rel="prefetch" href="/docs/docs-assets/js/51.d2d75d86.js"><link rel="prefetch" href="/docs/docs-assets/js/52.d2954f25.js"><link rel="prefetch" href="/docs/docs-assets/js/53.3b7448b8.js"><link rel="prefetch" href="/docs/docs-assets/js/54.c5fa84a9.js"><link rel="prefetch" href="/docs/docs-assets/js/55.7adaf1fd.js"><link rel="prefetch" href="/docs/docs-assets/js/56.001903e3.js"><link rel="prefetch" href="/docs/docs-assets/js/58.8a45ff77.js"><link rel="prefetch" href="/docs/docs-assets/js/59.7f1b8ded.js"><link rel="prefetch" href="/docs/docs-assets/js/6.a038a0d9.js"><link rel="prefetch" href="/docs/docs-assets/js/60.42ab9c8f.js"><link rel="prefetch" href="/docs/docs-assets/js/61.d5bdcc78.js"><link rel="prefetch" href="/docs/docs-assets/js/62.79d656f1.js"><link rel="prefetch" href="/docs/docs-assets/js/63.2f94cc15.js"><link rel="prefetch" href="/docs/docs-assets/js/64.efdf835a.js"><link rel="prefetch" href="/docs/docs-assets/js/65.1f834b7f.js"><link rel="prefetch" href="/docs/docs-assets/js/66.d3a83b04.js"><link rel="prefetch" href="/docs/docs-assets/js/67.fb66c157.js"><link rel="prefetch" href="/docs/docs-assets/js/68.4b161a7d.js"><link rel="prefetch" href="/docs/docs-assets/js/69.e0ed28e2.js"><link rel="prefetch" href="/docs/docs-assets/js/7.e18cbbd5.js"><link rel="prefetch" href="/docs/docs-assets/js/70.297d05a2.js"><link rel="prefetch" href="/docs/docs-assets/js/71.f924b521.js"><link rel="prefetch" href="/docs/docs-assets/js/72.92e55202.js"><link rel="prefetch" href="/docs/docs-assets/js/73.056033ad.js"><link rel="prefetch" href="/docs/docs-assets/js/74.b48dff2f.js"><link rel="prefetch" href="/docs/docs-assets/js/75.cc4f3116.js"><link rel="prefetch" href="/docs/docs-assets/js/76.b8159eec.js"><link rel="prefetch" href="/docs/docs-assets/js/77.a6c11b9a.js"><link rel="prefetch" href="/docs/docs-assets/js/78.5a5e8f02.js"><link rel="prefetch" href="/docs/docs-assets/js/79.417b485f.js"><link rel="prefetch" href="/docs/docs-assets/js/8.c3c7fa7b.js"><link rel="prefetch" href="/docs/docs-assets/js/80.4b3a2147.js"><link rel="prefetch" href="/docs/docs-assets/js/81.f0187fbb.js"><link rel="prefetch" href="/docs/docs-assets/js/82.846afe58.js"><link rel="prefetch" href="/docs/docs-assets/js/83.e3e070a1.js"><link rel="prefetch" href="/docs/docs-assets/js/84.2f163b19.js"><link rel="prefetch" href="/docs/docs-assets/js/85.abb06209.js"><link rel="prefetch" href="/docs/docs-assets/js/86.3d240784.js"><link rel="prefetch" href="/docs/docs-assets/js/87.8312739b.js"><link rel="prefetch" href="/docs/docs-assets/js/88.1dcc7bb2.js"><link rel="prefetch" href="/docs/docs-assets/js/89.cf6d5fd0.js"><link rel="prefetch" href="/docs/docs-assets/js/9.3a6a28a9.js"><link rel="prefetch" href="/docs/docs-assets/js/90.22c27945.js"><link rel="prefetch" href="/docs/docs-assets/js/91.9e7290ba.js"><link rel="prefetch" href="/docs/docs-assets/js/92.8fb41300.js"><link rel="prefetch" href="/docs/docs-assets/js/93.e8432aab.js"><link rel="prefetch" href="/docs/docs-assets/js/94.575a7545.js"><link rel="prefetch" href="/docs/docs-assets/js/95.d0d77b16.js"><link rel="prefetch" href="/docs/docs-assets/js/96.9b5fe8f3.js"><link rel="prefetch" href="/docs/docs-assets/js/97.219dd4b2.js"><link rel="prefetch" href="/docs/docs-assets/js/98.77112de7.js"><link rel="prefetch" href="/docs/docs-assets/js/99.7092c457.js"><link rel="stylesheet" href="/docs/docs-assets/css/0.styles.ec078ccc.css"></head><body><div id="app" data-server-rendered="true"><div class="theme-container"><header id="app-header" class="is-clearfix is-hidden-mobile"><nav id="navbar" role="navigation" aria-label="main navigation" class="navbar is-relative"><div class="container"><div class="navbar-brand ml-0"><a href="https://hstream.io" class="navbar-item"><img loading="lazy" src="/docs/docs-assets/img/logo-hstreamdb.5dbc865d.png" alt="HStreamDB: The streaming database built for IoT data storage and real-time analytics" class="logo"></a><a role="button" aria-label="menu" aria-expanded="false" data-target="navbarBasic" class="navbar-burger"><span aria-hidden="true"></span> <span aria-hidden="true"></span> <span aria-hidden="true"></span></a></div><div class="navbar-menu" style="--extra-height:72px"><div class="navbar-start"><a href="/docs/en/latest/" class="navbar-item router-link-active">Docs </a><a href="https://hstream.io/blog" target="_self" rel="noopener" class="navbar-item">Blog </a><a href="https://hstream.io/community" target="_self" rel="noopener" class="navbar-item">Community</a><div class="navbar-item has-dropdown is-hstreamdb"><a class="navbar-link is-arrowless">Company <i class="iconfont icon-arrow-down ml-1 is-size-7"></i></a><div class="navbar-dropdown is-hstreamdb"><a href="https://www.emqx.com/en/about" target="_blank" rel="noopener" class="dropdown-item is-flex is-align-items-center is-text-normal hover:is-text-primary has-text-weight-medium"><div class="dropdown-item-icon mr-3 p-2"><img loading="lazy" src="/docs/docs-images/hstreamdb/header/icon-about.png" alt="About Us"></div>About Us </a><a href="https://www.emqx.com/en/news" target="_blank" rel="noopener" class="dropdown-item is-flex is-align-items-center is-text-normal hover:is-text-primary has-text-weight-medium"><div class="dropdown-item-icon mr-3 p-2"><img loading="lazy" src="/docs/docs-images/hstreamdb/header/icon-news.png" alt="Newsroom"></div>Newsroom </a><a href="https://www.emqx.com/en/contact?product=hstreamdb" target="_blank" rel="noopener" class="dropdown-item is-flex is-align-items-center is-text-normal hover:is-text-primary has-text-weight-medium"><div class="dropdown-item-icon mr-3 p-2"><img loading="lazy" src="/docs/docs-images/hstreamdb/header/icon-email.png" alt="Contact Us"></div>Contact Us</a></div></div></div><div class="navbar-end"><div class="navbar-item is-hidden-touch"><a href="https://github.com/hstreamdb/hstream" target="_blank" rel="noopener noreferrer nofollow" class="is-flex is-align-items-center has-text-weight-medium is-text-normal hover:is-text-primary is-size-14"><i class="iconfont icon-github mr-2 is-size-4 is-text-black"></i> Star</a></div><div class="navbar-item is-hidden-touch"><a href="https://discord.gg/2fEsuvzYqc" target="_blank" rel="noopener noreferrer nofollow" class="is-flex is-align-items-center has-text-weight-medium is-text-normal hover:is-text-primary is-size-14"><i class="iconfont icon-discord mr-2 is-size-4 is-text-black"></i> Discord</a></div><div class="navbar-item is-hidden-touch"><a href="https://www.emqx.com/en/try?product=hstreamdb" target="_blank" class="button is-gradient is-trans-top has-text-weight-medium">Download</a></div><a href="https://www.emqx.com/en/try?product=hstreamdb" target="_blank" class="navbar-item is-hidden-desktop">Download</a></div></div></div></nav></header><header class="docs-navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><div class="navbar-left"><a href="/docs/en/latest/" class="home-link is-hidden-mobile router-link-active">Documentation </a><a href="/docs/en/latest/" class="home-link is-hidden-tablet router-link-active"><img loading="lazy" src="/docs/docs-assets/img/logo-hstreamdb.5dbc865d.png" alt="HStreamDB: The streaming database built for IoT data storage and real-time analytics" class="logo" style="height:40px;max-width:unset"></a></div><div class="links"><nav class="nav-links can-hide"><div class="nav-item"><a href="https://hstreamdb/docs/en/latest/" target="_self" class="nav-link external">Docs</a></div><div class="nav-item"><a href="https://hstream.io/blog" target="_self" class="nav-link external">Blog</a></div><div class="nav-item"><a href="https://hstream.io/community" target="_self" class="nav-link external">Community</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Company" class="dropdown-title"><span class="title">Company</span> <span class="arrow down"></span></button> <button type="button" aria-label="Company" class="mobile-dropdown-title"><span class="title">Company</span> <span class="arrow right"></span></button><ul class="nav-dropdown" style="display:none"><li class="dropdown-item"><a href="https://www.emqx.com/en/about" target="_blank" rel="noopener noreferrer" class="nav-link external">About Us</a></li><li class="dropdown-item"><a href="https://www.emqx.com/en/news" target="_blank" rel="noopener noreferrer" class="nav-link external">Newsroom</a></li><li class="dropdown-item"><a href="https://www.emqx.com/en/contact?product=hstreamdb" target="_blank" rel="noopener noreferrer" class="nav-link external">Contact Us</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button><ul class="nav-dropdown" style="display:none"><li class="dropdown-item"><a href="/docs/en/latest/" class="nav-link router-link-active">English</a></li><li class="dropdown-item"><a href="/docs/zh/latest/" class="nav-link">中文</a></li></ul></div></div></nav></div></header><div class="sidebar-mask"></div><section class="main-box"><div class="columns is-mobile is-gapless"><aside class="left-column sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://hstreamdb/docs/en/latest/" target="_self" class="nav-link external">Docs</a></div><div class="nav-item"><a href="https://hstream.io/blog" target="_self" class="nav-link external">Blog</a></div><div class="nav-item"><a href="https://hstream.io/community" target="_self" class="nav-link external">Community</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Company" class="dropdown-title"><span class="title">Company</span> <span class="arrow down"></span></button> <button type="button" aria-label="Company" class="mobile-dropdown-title"><span class="title">Company</span> <span class="arrow right"></span></button><ul class="nav-dropdown" style="display:none"><li class="dropdown-item"><a href="https://www.emqx.com/en/about" target="_blank" rel="noopener noreferrer" class="nav-link external">About Us</a></li><li class="dropdown-item"><a href="https://www.emqx.com/en/news" target="_blank" rel="noopener noreferrer" class="nav-link external">Newsroom</a></li><li class="dropdown-item"><a href="https://www.emqx.com/en/contact?product=hstreamdb" target="_blank" rel="noopener noreferrer" class="nav-link external">Contact Us</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button><ul class="nav-dropdown" style="display:none"><li class="dropdown-item"><a href="/docs/en/latest/" class="nav-link router-link-active">English</a></li><li class="dropdown-item"><a href="/docs/zh/latest/" class="nav-link">中文</a></li></ul></div></div></nav><div class="mt-6 mb-4"><div id="docsearch" class="algolia-search-box"></div></div><ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Introduction</span> <span class="arrow right"></span></p></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Getting started</span> <span class="arrow right"></span></p></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Guides</span> <span class="arrow right"></span></p></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Deployment</span> <span class="arrow right"></span></p></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Monitoring</span> <span class="arrow right"></span></p></section></li><li><a href="/docs/en/latest/cli/cli.html" class="sidebar-link">HStream CLI</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HStream IO</span> <span class="arrow right"></span></p></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Security</span> <span class="arrow down"></span></p><ul class="sidebar-links sidebar-group-items"><li><a href="/docs/en/latest/security/overview.html" class="sidebar-link">Overview</a></li><li><a href="/docs/en/latest/security/encryption.html" aria-current="page" class="active sidebar-link">Encryption</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/en/latest/security/encryption.html#steps" class="sidebar-link">Steps</a></li></ul></li><li><a href="/docs/en/latest/security/authentication.html" class="sidebar-link">Authentication</a></li></ul></section></li><li><a href="/docs/en/latest/release_notes/HStreamDB.html" class="sidebar-link">Release notes</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Reference</span> <span class="arrow right"></span></p></section></li></ul><div class="sidebar-bottom"><div class="version-pick"><div class="dropdown-wrapper"><button type="button" class="dropdown-title is-flex is-align-items-center is-justify-content-space-between"><span class="title">latest </span><i class="iconfont icon-arrow-down ml-1 is-size-7"></i></button></div></div><div class="lang-pick"><div class="dropdown-wrapper"><button type="button" class="dropdown-title p-0 is-flex is-align-items-center is-justify-content-end"><i class="iconfont icon-language is-size-4"></i></button><ul class="dropdown-items"><li class="dropdown-item"><a href="/docs/en/latest/" class="router-link-active is-active">English</a></li><li class="dropdown-item"><a href="/docs/zh/latest/">中文</a></li></ul></div></div></div></aside><div class="column"><div class="columns is-mobile is-gapless"><div class="column col-page"><main class="page"><div id="loader-wrapper" style="display:none" data-v-78d8edea><div class="loader" data-v-78d8edea><div class="ball-spin-fade-loader" data-v-78d8edea><div data-v-78d8edea></div><div data-v-78d8edea></div><div data-v-78d8edea></div><div data-v-78d8edea></div><div data-v-78d8edea></div><div data-v-78d8edea></div><div data-v-78d8edea></div><div data-v-78d8edea></div></div></div></div><div class="theme-default-content reset-width content__default"><h1 id="encryption"><a href="#encryption" class="header-anchor">#</a> Encryption</h1><p>hstream supported encryption between servers and clients using TLS, in this chapter, we will not introduce more details about TLS, instead, we will only show steps and configurations to enable it.</p><h2 id="steps"><a href="#steps" class="header-anchor">#</a> Steps</h2><p>If you don't have any existed CA(Certificate Authority), you can create one locally, and TLS requires that each server have a key and the corresponding signed certificate, openssl is a good tool to generate them, after that, you need to configure the files paths in the servers and clients sides to enable it.</p><h3 id="create-a-local-ca"><a href="#create-a-local-ca" class="header-anchor">#</a> create a local CA</h3><p>Create or choose a directory for storing keys and certificates:</p><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">mkdir</span> tls
<span class="token builtin class-name">cd</span> tls
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Create a database file and serial number file:</p><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">touch</span> index.txt
<span class="token builtin class-name">echo</span> <span class="token number">1000</span> <span class="token operator">&gt;</span> serial
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Get the template openssl.cnf file(<strong>the template file is intended for testing and development, do not use it in the production environment directly</strong>):</p><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">wget</span> https://raw.githubusercontent.com/hstreamdb/hstream/main/conf/openssl.cnf
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Generate the CA key file:</p><div class="language-shell line-numbers-mode"><pre class="language-shell"><code>openssl genrsa -aes256 -out ca.key.pem <span class="token number">4096</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Generate the CA certificate file:</p><div class="language-shell line-numbers-mode"><pre class="language-shell"><code>openssl req -config openssl.cnf -key ca.key.pem <span class="token punctuation">\</span>
    -new -x509 -days <span class="token number">7300</span> -sha256 -extensions v3_ca <span class="token punctuation">\</span>
    -out ca.cert.pem
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="create-key-pair-and-sign-certificate-for-a-server"><a href="#create-key-pair-and-sign-certificate-for-a-server" class="header-anchor">#</a> create key pair and sign certificate for a server</h3><p>Here we only generate a key and certificate for one server, you should create them for all hstream servers that have a different hostname, or create a certificate including all hostnames(IP or DNS) in SANs.</p><p>Generate the server key file:</p><div class="language-shell line-numbers-mode"><pre class="language-shell"><code>openssl genrsa -out server01.key.pem <span class="token number">2048</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Generate the server certificate request, when you input Common Name, you should write the correct hostname(e.g., localhost):</p><div class="language-shell line-numbers-mode"><pre class="language-shell"><code>openssl req -config openssl.cnf <span class="token punctuation">\</span>
    -key server01.key.pem -new -sha256 -out server01.csr.pem
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>generate the server certificate with the generated CA:</p><div class="language-shell line-numbers-mode"><pre class="language-shell"><code>openssl ca -config openssl.cnf -extensions server_cert <span class="token punctuation">\</span>
    -days <span class="token number">1000</span> -notext -md sha256 <span class="token punctuation">\</span>
    -in server01.csr.pem -out signed.server01.cert.pem
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="configure-the-server-and-clients"><a href="#configure-the-server-and-clients" class="header-anchor">#</a> configure the server and clients</h3><p>The options for servers:</p><div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment"># TLS options</span>
<span class="token comment">#</span>
<span class="token comment"># enable tls, which requires tls-key-path and tls-cert-path options</span>
<span class="token key atrule">enable-tls</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

<span class="token comment">#</span>
<span class="token comment"># key file path for tls, can be generated by openssl</span>
<span class="token key atrule">tls-key-path</span><span class="token punctuation">:</span> /path/to/the/server01.key.pem

<span class="token comment"># the signed certificate by CA for the key(tls-key-path)</span>
<span class="token key atrule">tls-cert-path</span><span class="token punctuation">:</span> /path/to/the/signed.server01.cert.pem
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>Java client:</p><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">HStreamClient</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">serviceUrl</span><span class="token punctuation">(</span>serviceUrl<span class="token punctuation">)</span>
  <span class="token comment">// optional, enable tls</span>
  <span class="token punctuation">.</span><span class="token function">enableTls</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">tlsCaPath</span><span class="token punctuation">(</span><span class="token string">&quot;/path/to/ca.cert.pem&quot;</span><span class="token punctuation">)</span>

  <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></div><div class="page-nav reset-width"><p class="inner"><span class="prev">← <a href="/docs/en/latest/security/overview.html" class="prev">Overview </a></span><span class="next"><a href="/docs/en/latest/security/authentication.html">Authentication </a>→</span></p></div></main></div><div class="right-column"><div class="docs-operation"><div class="doc-download improve-doc"><a href="https://github.com/hstreamdb/docs/edit/latest/docs/en/security/encryption.md" target="_blank" rel="noreferrer" class="improve-doc">Edit this page</a></div><div class="doc-download feedback-doc"><a href="https://github.com/hstreamdb/docs/issues/new?body=File:%20[/docs/en/security/encryption.md](https://hstream.io/docs/en/latest/security/encryption.html)" target="_blank" rel="noreferrer">Request docs changes</a></div></div><section class="doc-toc"><div class="title">What’s on this page</div><div class="toc-content"><ul><li><a href="/docs/en/latest/security/encryption.html#steps">Steps</a></li></ul></div></section></div></div></div></div></section><div id="page-feedback" data-v-fa621f20><div class="feedback-button is-flex is-align-items-center is-justify-content-center" data-v-fa621f20><svg aria-hidden="true" class="icon" data-v-fa621f20><use xlink:href="#icon-useful" data-v-fa621f20></use></svg></div><div class="feedback-form" style="display:none" data-v-fa621f20 data-v-fa621f20><div class="feedback-header pl-4 is-flex is-align-items-center is-justify-content-space-between" data-v-fa621f20>Was this page useful?<div class="icon-close p-4" style="cursor:pointer" data-v-fa621f20>x</div></div><div class="feedback-body p-4" data-v-fa621f20><div class="is-flex" data-v-fa621f20 data-v-67fd37ab data-v-fa621f20><div class="feedback-button like mr-5 is-flex is-align-items-center is-justify-content-center" data-v-fa621f20><svg aria-hidden="true" class="icon" data-v-fa621f20><use xlink:href="#icon-useful" data-v-fa621f20></use></svg></div><div class="feedback-button dislike is-flex is-align-items-center is-justify-content-center" data-v-fa621f20><svg aria-hidden="true" class="icon" data-v-fa621f20><use xlink:href="#icon-a-notuseful" data-v-fa621f20></use></svg></div></div></div></div></div></div><div class="global-ui"></div></div><script src="/docs/docs-assets/js/app.39d178c6.js" defer="defer"></script><script src="/docs/docs-assets/js/2.a817f45a.js" defer="defer"></script><script src="/docs/docs-assets/js/57.146cbc29.js" defer="defer"></script></body></html>